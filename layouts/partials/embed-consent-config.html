{{- /*
    Embed Consent Plugin Configuration Partial

    Include this in your <head> section to configure the plugin via data attributes.
    The JavaScript will automatically read these configuration values.

    Usage in baseof.html:
    {{ partial "embed-consent-config.html" . }}
*/ -}}

{{- $config := .Site.Params.embedConsent | default dict -}}
{{- $enableLocalStorage := $config.enableLocalStorage | default true -}}
{{- $showAlwaysAllowOption := $config.showAlwaysAllowOption | default true -}}
{{- $language := $config.language | default "en" -}}
{{- $privacyPolicyUrl := $config.privacyPolicyUrl | default "" -}}

{{- /* Set data attributes on html element for JavaScript to read */ -}}
<script>
(function() {
    var root = document.documentElement;
    root.setAttribute('data-embed-consent-storage', '{{ $enableLocalStorage }}');
    root.setAttribute('data-embed-consent-always-allow', '{{ $showAlwaysAllowOption }}');
    root.setAttribute('data-embed-consent-language', '{{ $language }}');
    {{- if $privacyPolicyUrl -}}
    root.setAttribute('data-embed-consent-privacy-url', '{{ $privacyPolicyUrl }}');
    {{- end -}}
})();
</script>
